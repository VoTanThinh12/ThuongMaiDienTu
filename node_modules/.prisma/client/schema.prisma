generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(100)
  email      String   @unique(map: "email") @db.VarChar(100)
  password   String   @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamp(0)
}

model chi_tiet_hoa_don_ban {
  id          Int          @id @default(autoincrement())
  id_hoa_don  Int?
  id_san_pham Int?
  so_luong    Int?
  don_gia     Decimal?     @db.Decimal(10, 2)
  hoa_don_ban hoa_don_ban? @relation(fields: [id_hoa_don], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "chi_tiet_hoa_don_ban_ibfk_1")
  san_pham    san_pham?    @relation(fields: [id_san_pham], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "chi_tiet_hoa_don_ban_ibfk_2")

  @@index([id_hoa_don], map: "id_hoa_don")
  @@index([id_san_pham], map: "id_san_pham")
}

model chi_tiet_phieu_nhap {
  id            Int         @id @default(autoincrement())
  id_phieu_nhap Int?
  id_san_pham   Int?
  so_luong_nhap Int?
  gia_nhap      Decimal?    @db.Decimal(10, 2)
  phieu_nhap    phieu_nhap? @relation(fields: [id_phieu_nhap], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "chi_tiet_phieu_nhap_ibfk_1")
  san_pham      san_pham?   @relation(fields: [id_san_pham], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "chi_tiet_phieu_nhap_ibfk_2")

  @@index([id_phieu_nhap], map: "id_phieu_nhap")
  @@index([id_san_pham], map: "id_san_pham")
}

model hoa_don_ban {
  id                   Int                    @id @default(autoincrement())
  id_nhan_vien         Int?
  ngay_ban             DateTime?              @default(now()) @db.DateTime(0)
  tong_tien            Decimal?               @db.Decimal(10, 2)
  chi_tiet_hoa_don_ban chi_tiet_hoa_don_ban[]
  nhan_vien            nhan_vien?             @relation(fields: [id_nhan_vien], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "hoa_don_ban_ibfk_1")

  @@index([id_nhan_vien], map: "id_nhan_vien")
}

model nha_cung_cap {
  id               Int          @id @default(autoincrement())
  ten_nha_cung_cap String?      @db.VarChar(100)
  so_dien_thoai    String?      @db.VarChar(15)
  dia_chi          String?      @db.Text
  phieu_nhap       phieu_nhap[]
}

model nhan_vien {
  id            Int               @id @default(autoincrement())
  ho_ten        String            @db.VarChar(100)
  tai_khoan     String            @unique @db.VarChar(50)
  mat_khau      String            @db.VarChar(100)
  vai_tro       nhan_vien_vai_tro @default(quan_ly)
  trang_thai    Boolean           @default(true)
  so_dien_thoai String?           @db.VarChar(15)
  dia_chi       String?           @db.Text
  email         String?           @unique
  ngay_sinh     DateTime?         @db.Date
  ngay_vao_lam  DateTime?         @db.Date
  hoa_don_ban   hoa_don_ban[]
  phieu_nhap    phieu_nhap[]

  @@index([tai_khoan], map: "tai_khoan")
  @@map("nhan_vien")
}

model phieu_nhap {
  id                  Int                   @id @default(autoincrement())
  id_nha_cung_cap     Int?
  ngay_nhap           DateTime?             @default(now()) @db.DateTime(0)
  id_nhan_vien        Int?
  chi_tiet_phieu_nhap chi_tiet_phieu_nhap[]
  nha_cung_cap        nha_cung_cap?         @relation(fields: [id_nha_cung_cap], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "phieu_nhap_ibfk_1")
  nhan_vien           nhan_vien?            @relation(fields: [id_nhan_vien], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "phieu_nhap_ibfk_2")

  @@index([id_nha_cung_cap], map: "id_nha_cung_cap")
  @@index([id_nhan_vien], map: "id_nhan_vien")
}

model san_pham {
  id                   Int                    @id @default(autoincrement())
  ten_san_pham         String?                @db.VarChar(100)
  ma_san_pham          String?                @unique(map: "ma_san_pham") @db.VarChar(50)
  don_vi_tinh          String?                @db.VarChar(50)
  gia_ban              Decimal?               @db.Decimal(10, 2)
  so_luong             Int?                   @default(0)
  ngay_tao             DateTime?              @default(now()) @db.DateTime(0)
  chi_tiet_hoa_don_ban chi_tiet_hoa_don_ban[]
  chi_tiet_phieu_nhap  chi_tiet_phieu_nhap[]
}

enum nhan_vien_vai_tro {
  quan_ly
  thu_ngan
  nhan_vien_kho
}

enum nhanvien_trangThai {
  ang_l_m @map("Đang làm")
  ngh_    @map("Đã nghỉ")
}
